version: 2


models:
  - name: users
    description: >
      Base model for Twitter users data, containing cleaned and typed information from raw users.
      Only includes users created before end of 2021.
    columns:
      - name: user_id
        description: Unique identifier for the user
      - name: name
        description: Display name of the user
      - name: screen_name
        description: Lowercase username of the user
      - name: location
        description: User defined location
      - name: description
        description: User profile description
      - name: url
        description: Profile URL
      - name: lang
        description: User language setting
      - name: verified
        description: Boolean indicating if user is verified
      - name: followers_count
        description: Number of followers
      - name: friends_count
        description: Number of users being followed
      - name: listed_count
        description: Number of lists containing this user
      - name: statuses_count
        description: Total number of tweets
      - name: favourites_count
        description: Number of tweets liked
      - name: created_at_date
        description: Date user account was created
      - name: recorded_at_date
        description: Date user data was recorded
      - name: created_at
        description: Timestamp when user was created
      - name: recorded_at
        description: Timestamp when user was recorded

  - name: interactions
    description: >
      Base model for Twitter interactions, containing cleaned and typed data from raw tweets.
      Includes tweets from 2020-2021 in German and English languages.
    columns:
      - name: tweet_id
        description: Unique identifier for the tweet
      - name: user_id
        description: User who created the tweet
      - name: source_application
        description: Application used to post tweet
      - name: retweet_count
        description: Number of retweets
      - name: favourite_count
        description: Number of likes/favourites
      - name: lang
        description: Tweet language
      - name: type
        description: Type of interaction (tweet, retweet, etc)
      - name: hashtags
        description: Array of hashtags used
      - name: urls
        description: Array of URLs included
      - name: mentioned_ids
        description: Array of mentioned user IDs
      - name: raw_text
        description: Original unprocessed tweet text
      - name: text
        description: Cleaned tweet text with URLs removed
      - name: refers_to
        description: ID of referenced tweet if reply/quote
      - name: created_at_date
        description: Date tweet was created
      - name: recorded_at_date
        description: Date tweet was recorded
      - name: created_at
        description: Timestamp of tweet creation
      - name: recorded_at
        description: Timestamp when tweet was recorded

  - name: ext_epi_netz_de
    description: >
      Processed version of the `ext_epi_netz_de` dataset containing standardized and cleaned information 
      on German politicians and their Twitter presence.
    columns:
      - name: user_id
        description: Unique Twitter user ID of the politician.
        tests:
          - not_null
          - unique
      - name: official_name
        description: Full name of the politician.
      - name: party
        description: Political party affiliation of the politician.
      - name: region
        description: Geographic region represented by the politician.
      - name: institution
        description: The political institution to which the politician belongs.
      - name: office
        description: Political office held by the politician.
      - name: twitter_name
        description: Twitter display name of the politician.
      - name: twitter_handle
        description: Twitter handle (username) in lowercase.
      - name: year_of_birth
        description: Year of birth of the politician.
        tests:
          - not_null
      - name: abgeordnetenwatch_id
        description: ID from the abgeordnetenwatch.de platform.
      - name: gender
        description: Gender of the politician.
      - name: wikidata_id
        description: Wikidata entity ID for the politician.

  - name: predictions
    description: >
      Table containing sentiment and toxicity analysis predictions for tweets, 
      along with associated probabilities and timestamps.

    columns:
      - name: tweet_id
        description: Unique identifier of the tweet.
        tests:
          - not_null
          - unique

      - name: user_id
        description: ID of the user who posted the tweet.

      - name: recorded_at
        description: Timestamp when the tweet was recorded.

      - name: week_start
        description: The start of the week (Monday) in which the tweet was recorded.

      - name: text
        description: The full text content of the tweet.

      - name: sentiment
        description: Sentiment classification of the tweet (`positive`, `neutral`, `negative`).

      - name: positive_probability
        description: Probability score for the tweet being classified as positive.

      - name: neutral_probability
        description: Probability score for the tweet being classified as neutral.

      - name: negative_probability
        description: Probability score for the tweet being classified as negative.

      - name: sentiment_score
        description: >
          Score indicating the sentiment strength in the tweet.
          Values range from **-1 (strongly negative) to +1 (strongly positive)**, 
          with **0 representing neutrality**.

      - name: toxicity_score
        description: >
          Adjusted toxicity score of the tweet.
          If the label was `toxic`, the raw score is used.
          If `neutral`, the score is **1 - toxicity_score** to reflect non-toxicity.

  - name: toxicity_predictions
    description: >
      Refined model containing toxicity and sentiment predictions for tweets with adjusted scores
      and derived sentiment metrics. Joins tweet sentiment analysis with interaction data to provide
      contextual information for toxicity analysis.
    columns:
      - name: tweet_id
        description: Unique identifier of the tweet.
        tests:
          - not_null
          - unique
      - name: user_id
        description: ID of the user who posted the tweet.
      - name: created_at
        description: Timestamp when the tweet was created (from interactions table).
      - name: toxicity_score
        description: >
          Adjusted toxicity score that reflects the degree of toxicity in the tweet.
          For toxic tweets, it uses the original score; for neutral tweets, it uses 1 minus the score
          to reflect the degree of non-toxicity.
      - name: sentiment_score
        description: >
          Derived metric calculating the difference between positive and negative probabilities,
          producing a score between -1 (most negative) and 1 (most positive).
      - name: positive_probability
        description: Probability that the tweet expresses positive sentiment.
      - name: negative_probability
        description: Probability that the tweet expresses negative sentiment.
